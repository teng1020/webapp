webpackJsonp([1],{"/k/a":function(e,t,n){"use strict";t.a={props:{},methods:{Console:function(e,t){this.$createToast({txt:t,time:1e3,type:e},!1).show()}}}},"3cXf":function(e,t,n){e.exports={default:n("LERP"),__esModule:!0}},LERP:function(e,t,n){var a=n("yDNk"),o=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},ZBJ4:function(e,t,n){e.exports=n.p+"static/img/logo.be43927.png"},awHz:function(e,t,n){(e.exports=n("UTlt")(!0)).push([e.i,"\n.logo[data-v-220900a0] {\n  text-align: center;\n}\n.logo .logo-img[data-v-220900a0] {\n  height: 2.266667rem;\n  wight: 2.266667rem;\n  padding-top: 1.866667rem;\n}\n.logo .title[data-v-220900a0] {\n  font-size: 0.426667rem;\n  color: #265483;\n  font-weight: 500;\n}\n.yl-form[data-v-220900a0] {\n  padding: 1.2rem 0.4rem 0 0.4rem;\n}\n.bottom[data-v-220900a0] {\n  margin-top: 0.533333rem;\n  font-size: 0.32rem;\n  color: #666;\n  text-align: center;\n}\n.bottom p>.wangji[data-v-220900a0] {\n  padding-left: 0.4rem;\n}","",{version:3,sources:["E:/ABP/YLMIS/webApp/ylwebappPwa/src/view/account/Login.vue"],names:[],mappings:";AACA;EACE,mBAAmB;CACpB;AACD;EACE,oBAAoB;EACpB,mBAAmB;EACnB,yBAAyB;CAC1B;AACD;EACE,uBAAuB;EACvB,eAAe;EACf,iBAAiB;CAClB;AACD;EACE,gCAAgC;CACjC;AACD;EACE,wBAAwB;EACxB,mBAAmB;EACnB,YAAY;EACZ,mBAAmB;CACpB;AACD;EACE,qBAAqB;CACtB",file:"Login.vue",sourcesContent:["\n.logo[data-v-220900a0] {\n  text-align: center;\n}\n.logo .logo-img[data-v-220900a0] {\n  height: 2.266667rem;\n  wight: 2.266667rem;\n  padding-top: 1.866667rem;\n}\n.logo .title[data-v-220900a0] {\n  font-size: 0.426667rem;\n  color: #265483;\n  font-weight: 500;\n}\n.yl-form[data-v-220900a0] {\n  padding: 1.2rem 0.4rem 0 0.4rem;\n}\n.bottom[data-v-220900a0] {\n  margin-top: 0.533333rem;\n  font-size: 0.32rem;\n  color: #666;\n  text-align: center;\n}\n.bottom p>.wangji[data-v-220900a0] {\n  padding-left: 0.4rem;\n}"],sourceRoot:""}])},dJFe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("3cXf"),o=n.n(a),s=n("hhm8"),i=n("HNM5"),r={mixins:[n("/k/a").a],data:function(){return{titleName:webappConfig().sysConf.titleName,validity:{},valid:void 0,formOptions:{scrollToInvalidField:!0,layout:"standard"},schema:{groups:[{fields:[{type:"input",modelKey:"userName",label:"用户名",props:{placeholder:"请输入用户名",autofocus:!0,clearable:!0},rules:{required:!0},messages:{required:"用户名不能为空!"}},{type:"input",modelKey:"passWord",label:"密  码",props:{placeholder:"请输入密码",type:"password",clearable:!0,eye:{open:!1}},rules:{required:!0},messages:{required:"密码不能为空!"}}]},{fields:[{type:"submit",label:"登   录"}]}]},model:{userName:"",passWord:""}}},methods:{_initlogin:function(){""===s.a.getCookie("ylClientId")&&s.a.setCookie("ylClientId",s.a.newGuid(!1),1)},submitHandler:function(e){var t=this,n={userName:this.model.userName,passWord:"",grant_type:"password",ylClientId:"",loginType:0},a=this.$createToast({time:0,txt:"登录中.."});a.show(),n.ylClientId=s.a.getCookie("ylClientId"),n.passWord=s.a.jsEncrypt(this.model.passWord),Object(i.a)({url:"/Token",method:"post",data:n},{baseURL:"",authorization:s.a.getDefaultToken(),formatData:!0}).then(function(e){var r=e;void 0!==r.error?("InvalidUserName"===r.error?t.Console("warn","用户名输入有误！"):"InvalidPassword"===r.error?t.Console("warn","密码输入有误！"):"InvalidOrgId"===r.error?t.Console("warn","用户没有授权权限范围！"):"InvalidRoleId"===r.error?t.Console("warn","用户没有授权角色！"):t.Console("error","登录有误"),n.passWord=""):""!==r.access_token?(s.a.setLogin(r.access_token),Object(i.a)({url:"/api/services/app/session/GetCurrentLoginInformations",method:"post",data:""}).then(function(e){e.success&&(s.a.setCookie("userInfo",o()(e.result),1),t.Console("success","登录成功，欢迎您！"),t.$router.replace("/Home"))})):(t.Console("error","登录失败！"),n.passWord=""),a.hide()}).catch(function(e){n.passWord="",a.hide()})},validateHandler:function(e){}},mounted:function(){this._initlogin()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("yl-header",{attrs:{theme:"light"}}),e._v(" "),a("div",{staticClass:"logo"},[a("img",{staticClass:"logo-img",attrs:{src:n("ZBJ4"),alt:""}}),e._v(" "),a("p",{staticClass:"title"},[e._v(e._s(e.titleName))])]),e._v(" "),a("div",{staticClass:"yl-form"},[a("cube-form",{attrs:{model:e.model,schema:e.schema,"immediate-validate":!1,options:e.formOptions},on:{validate:e.validateHandler,submit:e.submitHandler}})],1),e._v(" "),e._m(0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bottom"},[t("p",[t("span",{staticClass:"zhuce"},[this._v("注册账号")]),this._v(" "),t("span",{staticClass:"wangji"},[this._v("忘记密码？")])])])}]};var d=n("Z0/y")(r,l,!1,function(e){n("wIqI")},"data-v-220900a0",null);t.default=d.exports},wIqI:function(e,t,n){var a=n("awHz");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("FIqI")("59a4e120",a,!0,{})}});
//# sourceMappingURL=1.e2d5089bb5c7a658b3e0.js.map